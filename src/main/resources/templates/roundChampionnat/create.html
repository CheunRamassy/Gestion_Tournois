<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/create.css}">
  <title>Cr√©er un Tournoi</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>

  </style>
</head>
<body>
<!-- Floating Elements -->
<div class="floating-elements">
  <div class="floating-element">üéÆ</div>
  <div class="floating-element">üèÜ</div>
  <div class="floating-element">‚ö°</div>
  <div class="floating-element">üéØ</div>
</div>

<!-- Navigation -->
<nav th:replace="~{layout :: navbar}"></nav>

<!-- Form Header -->
<header class="form-header">
  <div class="container text-center">
    <h1 class="form-title">Cr√©er un Tournoi</h1>
    <p class="form-subtitle">Remplissez les informations ci-dessous pour configurer votre tournoi</p>
  </div>
</header>

<!-- Main Form -->
<main class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="form-container">
        <form action="/SimpleElimination/save" method="post" class="needs-validation" novalidate>

          <!-- Tournament Name -->
          <div class="form-group">
            <label for="nom" class="form-label">Nom du tournoi <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-trophy"></i></span>
              <input type="text" class="form-control" id="nom" name="nom" required
                     placeholder="Entrez le nom du tournoi" maxlength="100" />
            </div>
            <div class="error-message" style="display: none;">
              Veuillez entrer un nom de tournoi valide
            </div>
          </div>

          <!-- Number of Participants -->
          <div class="form-group">
            <label for="nombreParticipant" class="form-label">
              Nombre de participants <span class="text-danger">*</span>
              <i class="fas fa-info-circle tooltip-icon" title="Pour les tournois √† √©limination directe, pr√©f√©rez un nombre de participants qui est une puissance de 2 (4, 8, 16, 32, etc.)"></i>
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-users"></i></span>
              <input type="number" class="form-control" id="nombreParticipant" name="nombreParticipant" required
                     min="2" max="1024" placeholder="Nombre de participants" />
            </div>
            <div class="error-message" style="display: none;">
              Le nombre de participants doit √™tre entre 2 et 1024
            </div>
          </div>

          <!-- matchRetour -->
          <div class="form-group">
            <label class="form-label d-block">Mettre un match retour</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="matchRetour" id="matchRetourYes" value="true" checked>
              <label class="form-check-label" for="matchRetourYes">Oui</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="matchRetour" id="matchRetourNo" value="false">
              <label class="form-check-label" for="matchRetourNo">Non</label>
            </div>
          </div>

          <!-- Number of Teams -->
          <div class="form-group">
            <label for="nombreEquipes" class="form-label">Nombre d'√©quipes <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-users"></i></span>
              <input type="number" class="form-control" id="nombreEquipes" name="nombreEquipes" required
                     min="1" max="512" placeholder="Nombre d'√©quipes participantes" />
            </div>
            <div class="error-message" style="display: none;">
              Le nombre d'√©quipes doit √™tre entre 1 et 512
            </div>
          </div>

          <!-- Match Format -->
          <div class="form-group">
            <label for="formatMatch" class="form-label">Format des matchs <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-gamepad"></i></span>
              <select class="form-select" id="formatMatch" name="formatMatch" required>
                <option value="">S√©lectionnez un format</option>
                <option value="Bo1">Bo1 (Best of 1)</option>
                <option value="Bo3">Bo3 (Best of 3)</option>
                <option value="Bo5">Bo5 (Best of 5)</option>
                <option value="Bo7">Bo7 (Best of 7)</option>
              </select>
            </div>
            <div class="error-message" style="display: none;">
              Veuillez s√©lectionner un format de match
            </div>
          </div>

          <!-- Entry Fee -->
          <div class="form-group">
            <label for="prix" class="form-label">Prix de participation <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-euro-sign"></i></span>
              <input type="number" class="form-control" id="prix" name="prix" required
                     min="0" step="0.01" placeholder="Frais d'inscription (‚Ç¨)" />
            </div>
            <div class="error-message" style="display: none;">
              Veuillez entrer un prix valide
            </div>
          </div>

          <!-- Dates -->
          <div class="row">
            <!-- Registration Start Date -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="dateInscriptionDebut" class="form-label">D√©but des inscriptions <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                  <input type="date" class="form-control" id="dateInscriptionDebut" name="dateInscriptionDebut" required />
                </div>
                <div class="error-message" style="display: none;">
                  Veuillez s√©lectionner une date de d√©but
                </div>
              </div>
            </div>

            <!-- Registration End Date -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="dateInscriptionFin" class="form-label">Fin des inscriptions <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                  <input type="date" class="form-control" id="dateInscriptionFin" name="dateInscriptionFin" required />
                </div>
                <div class="error-message" style="display: none;">
                  Veuillez s√©lectionner une date de fin
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <!-- Tournament Start Date -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="dateDebut" class="form-label">D√©but du tournoi <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                  <input type="date" class="form-control" id="dateDebut" name="dateDebut" required />
                </div>
                <div class="error-message" style="display: none;">
                  Veuillez s√©lectionner une date de d√©but
                </div>
              </div>
            </div>

            <!-- Tournament End Date -->
            <div class="col-md-6">
              <div class="form-group">
                <label for="dateFin" class="form-label">Fin du tournoi <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                  <input type="date" class="form-control" id="dateFin" name="dateFin" required />
                </div>
                <div class="error-message" style="display: none;">
                  Veuillez s√©lectionner une date de fin
                </div>
              </div>
            </div>
          </div>

          <div class="alert alert-info mt-4">
            <i class="fas fa-info-circle me-2"></i>
            Tous les champs marqu√©s d'un <span class="text-danger">*</span> sont obligatoires.
          </div>

          <div class="d-flex justify-content-between mt-4">
            <a th:href="@{/RoundRobin/ListeTournois}" class="btn btn-outline-gaming">
              <i class="fas fa-arrow-left me-1"></i> Annuler
            </a>
            <button type="submit" class="btn btn-gaming">
              <i class="fas fa-save me-1"></i> Sauvegarder
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="footer mt-auto">
  <div class="container text-center">
    <p class="mb-0">&copy; 2025 TournoiPro - Tous droits r√©serv√©s</p>
  </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
  // Initialize tooltips
  document.addEventListener('DOMContentLoaded', function() {
    // Tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });

    // Form validation
    var forms = document.querySelectorAll('.needs-validation');
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();

          // Show error messages
          var inputs = form.querySelectorAll('input[required], select[required]');
          inputs.forEach(function(input) {
            var errorMsg = input.parentElement.parentElement.querySelector('.error-message');
            if (!input.checkValidity() && errorMsg) {
              errorMsg.style.display = 'block';
            } else if (errorMsg) {
              errorMsg.style.display = 'none';
            }
          });
        }
        form.classList.add('was-validated');
      }, false);
    });

    // Real-time validation
    var inputs = document.querySelectorAll('input, select');
    inputs.forEach(function(input) {
      input.addEventListener('input', function() {
        var errorMsg = input.parentElement.parentElement.querySelector('.error-message');
        if (input.checkValidity() && errorMsg) {
          errorMsg.style.display = 'none';
        }
      });
    });

    // Date validation
    var today = new Date().toISOString().split('T')[0];
    document.getElementById('dateInscriptionDebut').setAttribute('min', today);
    document.getElementById('dateInscriptionFin').setAttribute('min', today);
    document.getElementById('dateDebut').setAttribute('min', today);
    document.getElementById('dateFin').setAttribute('min', today);

    // Ensure dates are in logical order
    document.getElementById('dateInscriptionDebut').addEventListener('change', function() {
      document.getElementById('dateInscriptionFin').setAttribute('min', this.value);
    });

    document.getElementById('dateInscriptionFin').addEventListener('change', function() {
      document.getElementById('dateDebut').setAttribute('min', this.value);
    });

    document.getElementById('dateDebut').addEventListener('change', function() {
      document.getElementById('dateFin').setAttribute('min', this.value);
    });
  });
</script>
</body>
</html>